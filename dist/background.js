(()=>{var o;function t(o){chrome.storage.sync.get("config",(function(t){if(null===t||null===t.config||0===Object.keys(t.config).length)o("8084","http://localhost");else{for(var c=0,e=Object.entries(t.config);c<e.length;c++){var n=e[c];if("checked"==n[1].checked)return void o(n[1].port,n[1].url)}o("8084","http://localhost")}}))}function c(){chrome.browserAction.setIcon({path:{16:"assets/local/go_local_on_16.png",19:"assets/local/go_local_on_19.png",24:"assets/local/go_local_on_24.png",48:"assets/local/go_local_on_48.png"}})}function e(){chrome.browserAction.setIcon({path:{16:"assets/cloud/go_local_cloud_16.png",19:"assets/cloud/go_local_cloud_19.png",24:"assets/cloud/go_local_cloud_24.png",48:"assets/cloud/go_local_cloud_48.png"}})}chrome.browserAction.onClicked.addListener((function(n){chrome.tabs.query({active:!0,currentWindow:!0},(function(n){var a=n[0].id;o="go_local_tab_"+a.toString(),chrome.storage.local.get(o.toString(),(function(n){!0===n[o]?(chrome.tabs.sendMessage(a,{go_local:!1}),n[o]=!1,chrome.storage.local.set(n,(function(){e()}))):t((function(t,e){chrome.tabs.sendMessage(a,{go_local:!0,port:t,url:e}),n[o]=!0,chrome.storage.local.set(n,(function(){c()}))}))}))}))})),chrome.tabs.onActivated.addListener((function(n){var a=n.tabId;o="go_local_tab_"+a.toString(),chrome.tabs.get(a,(function(n){n.url.startsWith("https://apps.nextworld.net")?function(o,n){chrome.storage.local.get(n,(function(a){!0===a[n]?t((function(t,e){chrome.tabs.sendMessage(o,{go_local:!0,port:t,url:e}),a[n]=!0,chrome.storage.local.set(a,(function(){c()}))})):(a[n]=!1,chrome.tabs.sendMessage(o,{go_local:!1}),chrome.storage.local.set(a,(function(){e()})))}))}(a,o):chrome.browserAction.setIcon({path:{16:"assets/invalid/go_local_invalid_16.png",19:"assets/invalid/go_local_invalid_19.png",24:"assets/invalid/go_local_invalid_24.png",48:"assets/invalid/go_local_invalid_48.png"}})}))})),chrome.tabs.onUpdated.addListener((function(t,c,n){if(o="go_local_tab_"+t.toString(),"loading"==c.status&&void 0===c.url){chrome.tabs.sendMessage(t,{go_local:!1});var a={};a[o]=!1,chrome.storage.local.set(a,(function(){e()}))}}))})();