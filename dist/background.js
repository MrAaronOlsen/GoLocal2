(()=>{var o;function e(o){chrome.storage.sync.get("config",(e=>{if(null===e||null===e.config||0===Object.keys(e.config).length)o("8084","http://localhost");else{for(const t of Object.entries(e.config))if("checked"==t[1].checked)return void o(t[1].port,t[1].url);o("8084","http://localhost")}}))}function t(){chrome.browserAction.setIcon({path:{16:"assets/local/go_local_on_16.png",19:"assets/local/go_local_on_19.png",24:"assets/local/go_local_on_24.png",48:"assets/local/go_local_on_48.png"}})}function l(){chrome.browserAction.setIcon({path:{16:"assets/cloud/go_local_cloud_16.png",19:"assets/cloud/go_local_cloud_19.png",24:"assets/cloud/go_local_cloud_24.png",48:"assets/cloud/go_local_cloud_48.png"}})}chrome.browserAction.onClicked.addListener((s=>{chrome.tabs.query({active:!0,currentWindow:!0},(s=>{let a=s[0].id;o="go_local_tab_"+a.toString(),chrome.storage.local.get(o.toString(),(s=>{!0===s[o]?(chrome.tabs.sendMessage(a,{go_local:!1}),s[o]=!1,chrome.storage.local.set(s,(()=>{l()}))):e((function(e,l){chrome.tabs.sendMessage(a,{go_local:!0,port:e,url:l}),s[o]=!0,chrome.storage.local.set(s,(()=>{t()}))}))}))}))})),chrome.tabs.onActivated.addListener((s=>{let a=s.tabId;o="go_local_tab_"+a.toString(),chrome.tabs.get(a,(s=>{s.url.startsWith("https://apps.nextworld.net")?function(o,s){chrome.storage.local.get(s,(a=>{!0===a[s]?e((function(e,l){chrome.tabs.sendMessage(o,{go_local:!0,port:e,url:l}),a[s]=!0,chrome.storage.local.set(a,(()=>{t()}))})):(a[s]=!1,chrome.tabs.sendMessage(o,{go_local:!1}),chrome.storage.local.set(a,(()=>{l()})))}))}(a,o):chrome.browserAction.setIcon({path:{16:"assets/invalid/go_local_invalid_16.png",19:"assets/invalid/go_local_invalid_19.png",24:"assets/invalid/go_local_invalid_24.png",48:"assets/invalid/go_local_invalid_48.png"}})}))})),chrome.tabs.onUpdated.addListener(((e,t,s)=>{if(o="go_local_tab_"+e.toString(),"loading"==t.status&&void 0===t.url){chrome.tabs.sendMessage(e,{go_local:!1});let t={};t[o]=!1,chrome.storage.local.set(t,(()=>{l()}))}}))})();
//# sourceMappingURL=background.js.map