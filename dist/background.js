/******/ (() => { // webpackBootstrap
var __webpack_exports__ = {};
/*!*********************************!*\
  !*** ./src/background/index.js ***!
  \*********************************/
var current_tab; // Handles when GoLocal icon is left clicked

chrome.action.onClicked.addListener(function (tab) {
  chrome.tabs.query({
    active: true,
    currentWindow: true
  }, function (tabs) {
    var tabId = tabs[0].id;
    current_tab = 'go_local_tab_' + tabId.toString();
    chrome.storage.local.get(current_tab.toString(), function (result) {
      if (result[current_tab] === true) {
        chrome.tabs.sendMessage(tabId, {
          go_local: false
        });
        result[current_tab] = false;
        chrome.storage.local.set(result, function () {
          removeBadge();
        });
      } else {
        get_checked_config(function (port, url) {
          chrome.tabs.sendMessage(tabId, {
            go_local: true,
            port: port,
            url: url
          });
          result[current_tab] = true;
          chrome.storage.local.set(result, function () {
            setBadge();
          });
        });
      }
    });
  });
}); // Handles when the active tab changes

chrome.tabs.onActivated.addListener(function (tab) {
  var tabId = tab.tabId;
  current_tab = 'go_local_tab_' + tabId.toString();
  chrome.tabs.get(tabId, function (tab) {
    var allowedUrl = 'https://apps.nextworld.net';

    if (!tab.url.startsWith(allowedUrl)) {
      invalidBadge();
    } else {
      setMode(tabId, current_tab);
    }
  });
}); // Handles when the URL changes

chrome.tabs.onUpdated.addListener(function (tabId, info, tab) {
  current_tab = 'go_local_tab_' + tabId.toString();

  if (info.status == 'loading' && info.url === undefined) {
    chrome.tabs.sendMessage(tabId, {
      go_local: false
    });
    var storage = {};
    storage[current_tab] = false;
    chrome.storage.local.set(storage, function () {
      removeBadge();
    });
  }
}); // Functions

function get_checked_config(callback) {
  chrome.storage.sync.get('config', function (result) {
    if (result === null || result.config === null || Object.keys(result.config).length === 0) {
      callback('8084', 'http://localhost');
    } else {
      for (var _i = 0, _Object$entries = Object.entries(result.config); _i < _Object$entries.length; _i++) {
        var config = _Object$entries[_i];

        if (config[1].checked == 'checked') {
          callback(config[1].port, config[1].url);
          return;
        }
      } // Nothing is checked. So use default


      callback('8084', 'http://localhost');
    }
  });
}

function setMode(tabId, current_tab) {
  chrome.storage.local.get(current_tab, function (result) {
    if (result[current_tab] === true) {
      get_checked_config(function (port, url) {
        chrome.tabs.sendMessage(tabId, {
          go_local: true,
          port: port,
          url: url
        });
        result[current_tab] = true;
        chrome.storage.local.set(result, function () {
          setBadge();
        });
      });
    } else {
      result[current_tab] = false;
      chrome.tabs.sendMessage(tabId, {
        go_local: false
      });
      chrome.storage.local.set(result, function () {
        removeBadge();
      });
    }
  });
}

function setBadge() {
  chrome.action.setIcon({
    path: {
      16: 'assets/local/go_local_on_16.png',
      19: 'assets/local/go_local_on_19.png',
      24: 'assets/local/go_local_on_24.png',
      48: 'assets/local/go_local_on_48.png'
    }
  });
}

function removeBadge() {
  chrome.action.setIcon({
    path: {
      16: 'assets/cloud/go_local_cloud_16.png',
      19: 'assets/cloud/go_local_cloud_19.png',
      24: 'assets/cloud/go_local_cloud_24.png',
      48: 'assets/cloud/go_local_cloud_48.png'
    }
  });
}

function invalidBadge() {
  chrome.action.setIcon({
    path: {
      16: 'assets/invalid/go_local_invalid_16.png',
      19: 'assets/invalid/go_local_invalid_19.png',
      24: 'assets/invalid/go_local_invalid_24.png',
      48: 'assets/invalid/go_local_invalid_48.png'
    }
  });
}
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3JCbkIsTUFBTSxDQUFDQyxNQUFQLENBQWN3QyxPQUFkLENBQXNCO0lBQ3BCQyxJQUFJLEVBQUU7TUFDSixJQUFJLG9DQURBO01BRUosSUFBSSxvQ0FGQTtNQUdKLElBQUksb0NBSEE7TUFJSixJQUFJO0lBSkE7RUFEYyxDQUF0QjtBQVFEOztBQUVELFNBQVNmLFlBQVQsR0FBd0I7RUFDdEIzQixNQUFNLENBQUNDLE1BQVAsQ0FBY3dDLE9BQWQsQ0FBc0I7SUFDcEJDLElBQUksRUFBRTtNQUNKLElBQUksd0NBREE7TUFFSixJQUFJLHdDQUZBO01BR0osSUFBSSx3Q0FIQTtNQUlKLElBQUk7SUFKQTtFQURjLENBQXRCO0FBUUQsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dvbG9jYWwvLi9zcmMvYmFja2dyb3VuZC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY3VycmVudF90YWJcblxuLy8gSGFuZGxlcyB3aGVuIEdvTG9jYWwgaWNvbiBpcyBsZWZ0IGNsaWNrZWRcbmNocm9tZS5hY3Rpb24ub25DbGlja2VkLmFkZExpc3RlbmVyKCh0YWIpID0+IHtcbiAgY2hyb21lLnRhYnMucXVlcnkoeyBhY3RpdmU6IHRydWUsIGN1cnJlbnRXaW5kb3c6IHRydWUgfSwgKHRhYnMpID0+IHtcbiAgICBsZXQgdGFiSWQgPSB0YWJzWzBdLmlkXG4gICAgY3VycmVudF90YWIgPSAnZ29fbG9jYWxfdGFiXycgKyB0YWJJZC50b1N0cmluZygpXG5cbiAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoY3VycmVudF90YWIudG9TdHJpbmcoKSwgKHJlc3VsdCkgPT4ge1xuICAgICAgaWYgKHJlc3VsdFtjdXJyZW50X3RhYl0gPT09IHRydWUpIHtcbiAgICAgICAgY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFiSWQsIHsgZ29fbG9jYWw6IGZhbHNlIH0pXG5cbiAgICAgICAgcmVzdWx0W2N1cnJlbnRfdGFiXSA9IGZhbHNlXG4gICAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldChyZXN1bHQsICgpID0+IHtcbiAgICAgICAgICByZW1vdmVCYWRnZSgpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZXRfY2hlY2tlZF9jb25maWcoZnVuY3Rpb24gKHBvcnQsIHVybCkge1xuICAgICAgICAgIGNocm9tZS50YWJzLnNlbmRNZXNzYWdlKHRhYklkLCB7XG4gICAgICAgICAgICBnb19sb2NhbDogdHJ1ZSxcbiAgICAgICAgICAgIHBvcnQ6IHBvcnQsXG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgcmVzdWx0W2N1cnJlbnRfdGFiXSA9IHRydWVcbiAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQocmVzdWx0LCAoKSA9PiB7XG4gICAgICAgICAgICBzZXRCYWRnZSgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufSlcblxuLy8gSGFuZGxlcyB3aGVuIHRoZSBhY3RpdmUgdGFiIGNoYW5nZXNcbmNocm9tZS50YWJzLm9uQWN0aXZhdGVkLmFkZExpc3RlbmVyKCh0YWIpID0+IHtcbiAgbGV0IHRhYklkID0gdGFiLnRhYklkXG4gIGN1cnJlbnRfdGFiID0gJ2dvX2xvY2FsX3RhYl8nICsgdGFiSWQudG9TdHJpbmcoKVxuXG4gIGNocm9tZS50YWJzLmdldCh0YWJJZCwgKHRhYikgPT4ge1xuICAgIGxldCBhbGxvd2VkVXJsID0gJ2h0dHBzOi8vYXBwcy5uZXh0d29ybGQubmV0J1xuXG4gICAgaWYgKCF0YWIudXJsLnN0YXJ0c1dpdGgoYWxsb3dlZFVybCkpIHtcbiAgICAgIGludmFsaWRCYWRnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNldE1vZGUodGFiSWQsIGN1cnJlbnRfdGFiKVxuICAgIH1cbiAgfSlcbn0pXG5cbi8vIEhhbmRsZXMgd2hlbiB0aGUgVVJMIGNoYW5nZXNcbmNocm9tZS50YWJzLm9uVXBkYXRlZC5hZGRMaXN0ZW5lcigodGFiSWQsIGluZm8sIHRhYikgPT4ge1xuICBjdXJyZW50X3RhYiA9ICdnb19sb2NhbF90YWJfJyArIHRhYklkLnRvU3RyaW5nKClcblxuICBpZiAoaW5mby5zdGF0dXMgPT0gJ2xvYWRpbmcnICYmIGluZm8udXJsID09PSB1bmRlZmluZWQpIHtcbiAgICBjaHJvbWUudGFicy5zZW5kTWVzc2FnZSh0YWJJZCwgeyBnb19sb2NhbDogZmFsc2UgfSlcbiAgICBsZXQgc3RvcmFnZSA9IHt9XG4gICAgc3RvcmFnZVtjdXJyZW50X3RhYl0gPSBmYWxzZVxuXG4gICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHN0b3JhZ2UsICgpID0+IHtcbiAgICAgIHJlbW92ZUJhZGdlKClcbiAgICB9KVxuICB9XG59KVxuXG4vLyBGdW5jdGlvbnNcbmZ1bmN0aW9uIGdldF9jaGVja2VkX2NvbmZpZyhjYWxsYmFjaykge1xuICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldCgnY29uZmlnJywgKHJlc3VsdCkgPT4ge1xuICAgIGlmIChcbiAgICAgIHJlc3VsdCA9PT0gbnVsbCB8fFxuICAgICAgcmVzdWx0LmNvbmZpZyA9PT0gbnVsbCB8fFxuICAgICAgT2JqZWN0LmtleXMocmVzdWx0LmNvbmZpZykubGVuZ3RoID09PSAwXG4gICAgKSB7XG4gICAgICBjYWxsYmFjaygnODA4NCcsICdodHRwOi8vbG9jYWxob3N0JylcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChjb25zdCBjb25maWcgb2YgT2JqZWN0LmVudHJpZXMocmVzdWx0LmNvbmZpZykpIHtcbiAgICAgICAgaWYgKGNvbmZpZ1sxXS5jaGVja2VkID09ICdjaGVja2VkJykge1xuICAgICAgICAgIGNhbGxiYWNrKGNvbmZpZ1sxXS5wb3J0LCBjb25maWdbMV0udXJsKVxuXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gTm90aGluZyBpcyBjaGVja2VkLiBTbyB1c2UgZGVmYXVsdFxuICAgICAgY2FsbGJhY2soJzgwODQnLCAnaHR0cDovL2xvY2FsaG9zdCcpXG4gICAgfVxuICB9KVxufVxuXG5mdW5jdGlvbiBzZXRNb2RlKHRhYklkLCBjdXJyZW50X3RhYikge1xuICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoY3VycmVudF90YWIsIChyZXN1bHQpID0+IHtcbiAgICBpZiAocmVzdWx0W2N1cnJlbnRfdGFiXSA9PT0gdHJ1ZSkge1xuICAgICAgZ2V0X2NoZWNrZWRfY29uZmlnKGZ1bmN0aW9uIChwb3J0LCB1cmwpIHtcbiAgICAgICAgY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFiSWQsIHsgZ29fbG9jYWw6IHRydWUsIHBvcnQ6IHBvcnQsIHVybDogdXJsIH0pXG5cbiAgICAgICAgcmVzdWx0W2N1cnJlbnRfdGFiXSA9IHRydWVcbiAgICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHJlc3VsdCwgKCkgPT4ge1xuICAgICAgICAgIHNldEJhZGdlKClcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtjdXJyZW50X3RhYl0gPSBmYWxzZVxuICAgICAgY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFiSWQsIHsgZ29fbG9jYWw6IGZhbHNlIH0pXG4gICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQocmVzdWx0LCAoKSA9PiB7XG4gICAgICAgIHJlbW92ZUJhZGdlKClcbiAgICAgIH0pXG4gICAgfVxuICB9KVxufVxuXG5mdW5jdGlvbiBzZXRCYWRnZSgpIHtcbiAgY2hyb21lLmFjdGlvbi5zZXRJY29uKHtcbiAgICBwYXRoOiB7XG4gICAgICAxNjogJ2Fzc2V0cy9sb2NhbC9nb19sb2NhbF9vbl8xNi5wbmcnLFxuICAgICAgMTk6ICdhc3NldHMvbG9jYWwvZ29fbG9jYWxfb25fMTkucG5nJyxcbiAgICAgIDI0OiAnYXNzZXRzL2xvY2FsL2dvX2xvY2FsX29uXzI0LnBuZycsXG4gICAgICA0ODogJ2Fzc2V0cy9sb2NhbC9nb19sb2NhbF9vbl80OC5wbmcnLFxuICAgIH0sXG4gIH0pXG59XG5cbmZ1bmN0aW9uIHJlbW92ZUJhZGdlKCkge1xuICBjaHJvbWUuYWN0aW9uLnNldEljb24oe1xuICAgIHBhdGg6IHtcbiAgICAgIDE2OiAnYXNzZXRzL2Nsb3VkL2dvX2xvY2FsX2Nsb3VkXzE2LnBuZycsXG4gICAgICAxOTogJ2Fzc2V0cy9jbG91ZC9nb19sb2NhbF9jbG91ZF8xOS5wbmcnLFxuICAgICAgMjQ6ICdhc3NldHMvY2xvdWQvZ29fbG9jYWxfY2xvdWRfMjQucG5nJyxcbiAgICAgIDQ4OiAnYXNzZXRzL2Nsb3VkL2dvX2xvY2FsX2Nsb3VkXzQ4LnBuZycsXG4gICAgfSxcbiAgfSlcbn1cblxuZnVuY3Rpb24gaW52YWxpZEJhZGdlKCkge1xuICBjaHJvbWUuYWN0aW9uLnNldEljb24oe1xuICAgIHBhdGg6IHtcbiAgICAgIDE2OiAnYXNzZXRzL2ludmFsaWQvZ29fbG9jYWxfaW52YWxpZF8xNi5wbmcnLFxuICAgICAgMTk6ICdhc3NldHMvaW52YWxpZC9nb19sb2NhbF9pbnZhbGlkXzE5LnBuZycsXG4gICAgICAyNDogJ2Fzc2V0cy9pbnZhbGlkL2dvX2xvY2FsX2ludmFsaWRfMjQucG5nJyxcbiAgICAgIDQ4OiAnYXNzZXRzL2ludmFsaWQvZ29fbG9jYWxfaW52YWxpZF80OC5wbmcnLFxuICAgIH0sXG4gIH0pXG59XG4iXSwibmFtZXMiOlsiY3VycmVudF90YWIiLCJjaHJvbWUiLCJhY3Rpb24iLCJvbkNsaWNrZWQiLCJhZGRMaXN0ZW5lciIsInRhYiIsInRhYnMiLCJxdWVyeSIsImFjdGl2ZSIsImN1cnJlbnRXaW5kb3ciLCJ0YWJJZCIsImlkIiwidG9TdHJpbmciLCJzdG9yYWdlIiwibG9jYWwiLCJnZXQiLCJyZXN1bHQiLCJzZW5kTWVzc2FnZSIsImdvX2xvY2FsIiwic2V0IiwicmVtb3ZlQmFkZ2UiLCJnZXRfY2hlY2tlZF9jb25maWciLCJwb3J0IiwidXJsIiwic2V0QmFkZ2UiLCJvbkFjdGl2YXRlZCIsImFsbG93ZWRVcmwiLCJzdGFydHNXaXRoIiwiaW52YWxpZEJhZGdlIiwic2V0TW9kZSIsIm9uVXBkYXRlZCIsImluZm8iLCJzdGF0dXMiLCJ1bmRlZmluZWQiLCJjYWxsYmFjayIsInN5bmMiLCJjb25maWciLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiZW50cmllcyIsImNoZWNrZWQiLCJzZXRJY29uIiwicGF0aCJdLCJzb3VyY2VSb290IjoiIn0=